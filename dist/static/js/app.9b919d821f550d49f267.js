webpackJsonp([1],{"9DBV":function(e,t){},NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("7+uW"),i=s("It2I"),a=s.n(i),o=(s("3VHS"),s("1mcD")),r=s.n(o),c=s("Sazm"),u=s.n(c),l={name:"chatBox",data:()=>({listeMessages:[],listeMessagesLongueur:0,limitMessage:20,user:""}),methods:{afficherMessage(){y.collection("sections/section1/messages").orderBy("envois","desc").limit(this.limitMessage).onSnapshot(e=>{this.listeMessages.splice(0,this.listeMessages.length),e.forEach(e=>{var t=[e.data().text,e.data().expediteur];this.listeMessages.push(t)}),this.listeMessages.reverse(),this.listeMessagesLongueur=this.listeMessages.length,window.scroll(0,1e4)})},ancienMessageAfficher(){this.limitMessage+=10,this.afficherMessage(),this.listeMessagesLongueur=this.listeMessages.length},ancienMessageSpprimer(){this.listeMessagesLongueur=this.listeMessages.length,this.listeMessages.splice(0,10),this.limitMessage+=-10}},created(){this.afficherMessage(),this.user=u.a.auth().currentUser.displayName}},h={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"tchat"}},[s("button",{on:{click:e.ancienMessageAfficher}},[e._v("ancien message")]),e._v(" "),e.listeMessagesLongueur>30?s("button",{on:{click:e.ancienMessageSpprimer}},[e._v("moins")]):e._e(),e._v(" "),s("ul",{staticClass:"listeMessage"},e._l(e.listeMessages,function(t){return s("li",{staticClass:"messageCSS"},[t[1]==e.user?s("div",{staticClass:"userCSS"},[s("b",[e._v("moi")]),e._v(": "+e._s(t[0]))]):s("div",[s("b",[e._v(e._s(t[1]))]),e._v(": "+e._s(t[0]))])])}))])},staticRenderFns:[]};var d=s("VU/8")(l,h,!1,function(e){s("oE4D")},null,null).exports,g={name:"inputEnvois",data:()=>({messageEnvoyer:""}),methods:{envois(){y.collection("sections/section1/messages").add({envois:new Date,text:this.messageEnvoyer,expediteur:u.a.auth().currentUser.displayName}).then(function(e){console.log("Document written with ID: ",e.id)}).catch(function(e){console.error("Error adding document: ",e)}),this.messageEnvoyer=""}}},m={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("input",{directives:[{name:"model",rawName:"v-model",value:e.messageEnvoyer,expression:"messageEnvoyer"}],staticClass:"envoyerCSS",attrs:{type:"text"},domProps:{value:e.messageEnvoyer},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.envois(t):null},input:function(t){t.target.composing||(e.messageEnvoyer=t.target.value)}}})},staticRenderFns:[]};var p=s("VU/8")(g,m,!1,function(e){s("9DBV")},null,null).exports,f={name:"actifs",data:()=>({actifs:["actifs"]}),methods:{afficherActifs(){console.log("ok actifs"),y.collection("users").where("actif","==",!0).onSnapshot(e=>{e.forEach(e=>{this.actifs.push(e.data().name)})})}},created(){this.afficherActifs()}},v={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",e._l(e.actifs,function(t){return s("div",{staticClass:"actifs"},[e._v(e._s(t))])}))},staticRenderFns:[]};var _={name:"App",components:{chatBox:d,inputEnvois:p,actifs:s("VU/8")(f,v,!1,function(e){s("qY6z")},null,null).exports},data(){return{loading:!0,user:null,Connexion:this.etatConnexion}},methods:{signInGoogle(){const e=new u.a.auth.GoogleAuthProvider;u.a.auth().signInWithPopup(e).then(e=>{this.etatConnexion=!0,y.collection("users").doc(u.a.auth().currentUser.uid).set({name:u.a.auth().currentUser.displayName,actif:!0}).then(function(){console.log("Document successfully updated!")}).catch(function(e){console.error("Error writing document: ",e)})}).catch(e=>console.log(error)),this.userName=u.a.auth().currentUser.displayName},signOutButton(){y.collection("users").doc(u.a.auth().currentUser.uid).update({actif:!1}).then(()=>{u.a.auth().signOut().then(()=>{this.etatConnexion=!1,this.user=""}).catch(e=>console.log(error)),console.log("Document successfully updated!")}).catch(e=>{console.error("Error writing document: ",error)})}},updated(){this.user=this.userName}},M={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[0==e.etatConnexion?s("button",{on:{click:e.signInGoogle}},[e._v("Sign in with Google")]):e._e(),e._v(" "),1==e.etatConnexion?s("button",{on:{click:e.signOutButton}},[e._v("deco")]):e._e(),e._v(" "),1==e.etatConnexion?s("actifs"):e._e(),e._v(" "),s("div",{staticClass:"tchatZone"},[1==e.etatConnexion?s("chatBox"):e._e(),e._v(" "),s("div",{attrs:{id:"centrerCSS"}},[1==e.etatConnexion?s("inputEnvois"):e._e()],1)],1)],1)},staticRenderFns:[]};var x=s("VU/8")(_,M,!1,function(e){s("tvy8")},null,null).exports;n.a.use(r.a);a.a.initializeApp({apiKey:"AIzaSyCTgLAxSweaSst3pIxqhJ9pql3T1LrdBQA",authDomain:"test-chat-188d8.firebaseapp.com",databaseURL:"https://test-chat-188d8.firebaseio.com",projectId:"test-chat-188d8",storageBucket:"test-chat-188d8.appspot.com",messagingSenderId:"1012304882000"});const y=a.a.firestore();t.db=y,n.a.config.productionTip=!1,n.a.mixin({data:function(){return{get etatConnexion(){return!1},get userName(){return""}}}}),new n.a({el:"#app",components:{App:x},template:"<App/>"})},oE4D:function(e,t){},qY6z:function(e,t){},tvy8:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.9b919d821f550d49f267.js.map